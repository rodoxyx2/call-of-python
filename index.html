<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Python Quest</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial}
body{background:#0d0d0d;color:#eee;display:flex;height:100vh}
nav{width:220px;background:#1a0000;padding:10px;overflow-y:auto}
nav h2{color:#ff4d4d;margin-bottom:10px;font-size:20px;text-align:center}
nav ul{list-style:none}
nav li{padding:8px;margin:6px 0;background:#330000;border-radius:5px;cursor:pointer;opacity:.6}
nav li.active{background:#ff1a1a;opacity:1}
nav li.unlocked{opacity:1}
nav li.locked{cursor:not-allowed}
main{flex:1;display:flex;flex-direction:column;padding:15px}
header{padding:10px;background:#1a0000;border-radius:5px;margin-bottom:10px;font-size:22px}
#content{flex:1;background:#190000;padding:15px;border-radius:5px;overflow:auto}
textarea{width:100%;height:150px;background:#000;color:#fff;border:1px solid #ff1a1a;border-radius:5px;padding:8px;font-size:15px}
button{padding:10px 15px;border:none;border-radius:5px;margin-top:10px;background:#ff1a1a;color:#fff;cursor:pointer}
#msg{margin-top:10px;padding:8px;border-radius:5px}
#msg.ok{background:#0f3;color:#000}
#msg.err{background:#900}
footer{padding:8px;text-align:center;color:#777;font-size:13px}
</style>
</head>
<body>

<nav>
<h2>Niveles</h2>
<ul id="levels"></ul>
</nav>

<main>
<header id="title">Python Quest</header>
<div id="content"></div>
<footer>Proyecto educativo</footer>
</main>

<script>
// --- DATA DEL JUEGO ---
const levels=[
{title:"Introducción",unlocked:true,desc:"Aprenderás Python desde cero.",task:null,solution:null},
{title:"Nivel 1: Variables",unlocked:true,desc:"Declara una variable llamada edad con valor 25.",task:"edad = 25",solution:/edad\s*=\s*25/},
{title:"Nivel 2: Strings",unlocked:false,desc:"Crea una variable nombre con valor 'Ana'.",task:"nombre = 'Ana'",solution:/nombre\s*=\s*['\"]Ana['\"]/},
{title:"Nivel 3: Condicionales",unlocked:false,desc:"Si number es mayor a 10 imprime 'alto'.",task:"number=11\nif number>10:\n    print('alto')",solution:/if\s+number\s*>\s*10/},
{title:"Nivel 4: Bucles",unlocked:false,desc:"Crea un for que imprima 0 al 4.",task:"for i in range(5): print(i)",solution:/for/},
{title:"Nivel 5: Listas",unlocked:false,desc:"Crea una lista con tres frutas.",task:"frutas=['a','b','c']",solution:/\[/},
{title:"Nivel Final",unlocked:false,desc:"Crea una función que retorne 'GG'.",task:"def f(): return 'GG'",solution:/def/}
];

// --- RENDER MENU ---
const ul=document.querySelector("#levels");
function drawMenu(){
ul.innerHTML="";
levels.forEach((lv,i)=>{
let li=document.createElement("li");
li.textContent=lv.title;
li.className=lv.unlocked?"unlocked":"locked";
li.onclick=()=>lv.unlocked?openLevel(i):null;
if(i===current)li.classList.add("active");
ul.appendChild(li);
});
}

// --- RENDER CONTENT ---
let current=0;
function openLevel(i){
current=i;
drawMenu();
let lv=levels[i];
let html=`<h3>${lv.title}</h3><p>${lv.desc}</p>`;
if(lv.solution){
html+=`<textarea id='code' placeholder='Escribe tu código...'></textarea>
<button onclick='check()'>Ejecutar</button><div id='msg'></div>`;
}
document.querySelector("#content").innerHTML=html;
document.querySelector("#title").textContent=lv.title;
}

// --- VALIDACIÓN ---
function check(){
let code=document.querySelector("#code").value;
let lv=levels[current];
let msg=document.querySelector("#msg");
if(lv.solution.test(code)){
msg.textContent="Correcto, avanzas!";
msg.className="ok";
unlock();
}else{
msg.textContent="Incorrecto, revisa tu código.";
msg.className="err";
}
}

// --- DESBLOQUEO ---
function unlock(){
if(current+1<levels.length){
levels[current+1].unlocked=true;
drawMenu();
}
}

// INIT
drawMenu();
openLevel(0);
</script>
</body>
</html>
