<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Call-Of-Python</title>
<style>
    body {
        margin: 0; background: #0d0d0d; color: #fff;
        font-family: 'Segoe UI', sans-serif;
        display: flex; height: 100vh; overflow: hidden;
    }
    #sidebar {
        width: 260px; background: #1a0000; padding: 15px;
        overflow-y: auto; border-right: 2px solid #600;
    }
    h2 { color: #f33; margin-top: 0; text-align: center; }
    .mission-title {
        margin: 10px 0 5px; color: #ff5555; font-weight: bold;
    }
    .level {
        padding: 8px; margin: 4px 0; background: #300;
        border-radius: 6px; cursor: pointer;
        transition: 0.2s;
    }
    .level.locked { opacity: 0.4; cursor: not-allowed; }
    .level:hover:not(.locked) { background: #500; }
    #content {
        flex: 1; padding: 25px; overflow-y: auto;
    }
    #editor {
        width: 100%; height: 160px; border-radius: 6px;
        background: #111; color: #ff9999; border: 1px solid #600;
        padding: 10px; margin-top: 10px; resize: vertical;
        font-family: Consolas, monospace;
    }
    button {
        margin-top: 10px; padding: 10px 15px;
        background: #800; color: #fff; border: none;
        border-radius: 6px; cursor: pointer;
    }
    #xpbar {
        height: 20px; width: 100%; background: #300;
        border-radius: 10px; margin-bottom: 10px;
    }
    #xpfill {
        height: 100%; width: 0%; background: #f33;
        border-radius: 10px; transition: width 0.4s;
    }
    #pyshot {
        font-size: 28px; color: #ff3333; margin-top: 15px;
        display: none; text-shadow: 0 0 10px #f33;
        font-weight: bold;
    }
</style>
</head>
<body>

<div id="sidebar">
    <h2>Call-Of-Python</h2>

    <div id="xpbar"><div id="xpfill"></div></div>
    <p style="text-align:center;">XP: <span id="xpshow">0</span></p>

    <div class="mission-title">MISIÓN 1: Fundamentos</div>
    <div class="level" data-id="intro">Introducción</div>
    <div class="level" data-id="m1l1">Nivel Básico 1</div>
    <div class="level locked" data-id="m1l2">Nivel Básico 2</div>
    <div class="level locked" data-id="m1l3">Nivel Básico 3</div>

    <div class="mission-title">MISIÓN 2: Operadores</div>
    <div class="level locked" data-id="m2l1">Nivel 1</div>
    <div class="level locked" data-id="m2l2">Nivel 2</div>
    <div class="level locked" data-id="m2l3">Nivel 3</div>

    <div class="mission-title">MISIÓN 3: Condiciones</div>
    <div class="level locked" data-id="m3l1">Nivel 1</div>
    <div class="level locked" data-id="m3l2">Nivel 2</div>
    <div class="level locked" data-id="m3l3">Nivel 3</div>
</div>

<div id="content">
    <h1>Bienvenido Soldado</h1>
    <p>Este es el campo de entrenamiento de <b>Call-Of-Python</b>. Completa misiones, gana XP y desbloquea niveles.</p>
</div>

<script>
let xp = 0;
const xpDisplay = document.getElementById("xpshow");
const xpFill = document.getElementById("xpfill");
const content = document.getElementById("content");
const pyshot = document.createElement("div");
pyshot.id = "pyshot"; pyshot.textContent = "PYSHOT!";
content.appendChild(pyshot);

// Niveles y respuestas esperadas
const levels = {
    intro: {
        text: "<h1>¿Qué es Python?</h1><p>Python es un lenguaje de programación usado para crear juegos, apps, IA y más. Aquí aprenderás lo básico paso a paso.</p>",
        xp: 10
    },
    m1l1: {
        text: "<h1>Variables</h1><p>Crea una variable llamada <b>edad</b> con valor 20.</p><textarea id='editor'></textarea><button onclick='check(`edad = 20`)'>Verificar</button>",
        xp: 20
    },
    m1l2: {
        text: "<h1>Strings</h1><p>Crea una variable <b>nombre</b> con tu nombre dentro de comillas.</p><textarea id='editor'></textarea><button onclick='check(`nombre =`)'>Verificar</button>",
        xp: 25
    },
    m1l3: {
        text: "<h1>Print básico</h1><p>Escribe un print que muestre <b>Hola Python</b>.</p><textarea id='editor'></textarea><button onclick='check(`print(`)'>Verificar</button>",
        xp: 30
    },

    m2l1: {
        text: "<h1>Suma</h1><p>Crea una variable <b>total</b> que sea 5 + 3.</p><textarea id='editor'></textarea><button onclick='check(`total = 8`)'>Verificar</button>",
        xp: 30
    },
    m2l2: {
        text: "<h1>Multiplicación</h1><p>Crea una variable <b>doble</b> que sea 4 * 2.</p><textarea id='editor'></textarea><button onclick='check(`doble = 8`)'>Verificar</button>",
        xp: 35
    },
    m2l3: {
        text: "<h1>Operadores mixtos</h1><p>Crea una variable <b>resultado</b> que valga 10 - 3.</p><textarea id='editor'></textarea><button onclick='check(`resultado = 7`)'>Verificar</button>",
        xp: 40
    },

    m3l1: {
        text: "<h1>Condicional simple</h1><p>Escribe un if que compare si x es mayor que 5.</p><textarea id='editor'></textarea><button onclick='check(`if x >`)'>Verificar</button>",
        xp: 35
    },
    m3l2: {
        text: "<h1>If/Else</h1><p>Crea un condicional con else.</p><textarea id='editor'></textarea><button onclick='check(`else:`)'>Verificar</button>",
        xp: 40
    },
    m3l3: {
        text: "<h1>Comparación completa</h1><p>Escribe un if que imprima algo si edad &gt;= 18.</p><textarea id='editor'></textarea><button onclick='check(`>=`)'>Verificar</button>",
        xp: 50
    }
};

// --- FUNCIONES ---
function loadLevel(id) {
    const levelEl = document.querySelector(`[data-id='${id}']`);
    if (levelEl.classList.contains("locked")) return;

    content.innerHTML = levels[id].text;
    content.appendChild(pyshot);
}

function addXP(amount) {
    xp += amount;
    xpDisplay.textContent = xp;
    xpFill.style.width = Math.min(xp, 100) + "%";
}

function check(expected) {
    const user = document.getElementById("editor").value;
    if (user.includes(expected)) {
        pyshot.style.display = "block";
        setTimeout(() => pyshot.style.display = "none", 1200);
        addXP(20);
        unlockLevels();
    } else alert("Revisa tu código, soldado.");
}

function unlockLevels() {
    document.querySelectorAll(".locked").forEach(lvl => {
        let need = 20; // XP necesario por nivel — dificultad suave
        if (xp >= need) lvl.classList.remove("locked");
        need += 20;
    });
}

// Evento click en los niveles
document.querySelectorAll(".level").forEach(lvl => {
    lvl.onclick = () => loadLevel(lvl.dataset.id);
});
</script>
</body>
</html>
