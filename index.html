<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<title>Call-Of-Python</title>

<style>
  body{font-family:Arial;margin:0;display:flex;background:#120007;color:#fff;height:100vh;}
  #sidebar{width:260px;background:#2b0010;padding:18px;height:100vh;overflow:auto;border-right:3px solid #ff002b}
  #sidebar h2{color:#ff003c;margin:0 0 10px;font-size:22px}
  .mission-title{margin-top:18px;color:#ff8aa3;font-weight:700;font-size:18px}
  .sublevel-title{margin-left:10px;margin-top:10px;color:#fcb3c4;font-size:15px}
  .level{margin:6px 0 6px 18px;padding:8px;background:#3d0016;border-left:4px solid #ff003c;cursor:pointer;
         border-radius:4px;font-size:14px}
  .locked{opacity:.35;pointer-events:none}

  #content{flex:1;padding:20px;overflow:auto}
  textarea{width:95%;height:150px;background:#000;color:#0ff;padding:10px;border:2px solid #ff003c;border-radius:6px;font-family:monospace}
  button{margin-top:10px;padding:10px 16px;background:#ff003c;border:none;color:#fff;border-radius:6px;cursor:pointer;font-weight:700}
  #msg{margin-top:14px;padding:10px;border-radius:6px}

  /* Barra de XP */
  #xpContainer{width:95%;background:#3d0016;border:2px solid #ff003c;height:25px;border-radius:8px;margin-top:10px}
  #xpBar{height:100%;width:0%;background:#ff003c;border-radius:8px;transition:.3s}

  pre.example{background:#0f0f0f;padding:10px;color:#9efff3;border-radius:6px}

  #pyshotOverlay{position:fixed;left:0;top:0;width:100%;height:100%;display:none;
    background:rgba(0,0,0,.8);z-index:50;align-items:center;justify-content:center}
  #pyshotOverlay h1{font-size:72px;color:#ff3030;text-shadow:0 0 30px #ff3030;transform:scale(0);animation:pop .5s forwards}
  @keyframes pop{to{transform:scale(1)}}
</style>
</head>
<body>

<div id="sidebar">
  <h2>CALL-OF-PYTHON</h2>

  <div class="mission-title">INTRODUCCIÓN</div>
  <div class="level" id="introBtn" onclick="loadLevel('intro')" data-id="intro">¿Qué es Python?</div>

  <!-- MISIÓN 1 -->
  <div class="mission-title">MISIÓN 1: Fundamentos</div>
  <div class="sublevel-title">Básico</div>
    <div class="level" data-id="1a" onclick="loadLevel('1a')">Variables</div>
    <div class="level locked" data-id="1b" onclick="loadLevel('1b')">Strings</div>
    <div class="level locked" data-id="1c" onclick="loadLevel('1c')">Números</div>
  <div class="sublevel-title">Intermedio</div>
    <div class="level locked" data-id="1d" onclick="loadLevel('1d')">Concatenación</div>
    <div class="level locked" data-id="1e" onclick="loadLevel('1e')">Casting</div>

  <!-- MISIÓN 2 -->
  <div class="mission-title">MISIÓN 2: Condiciones</div>
  <div class="sublevel-title">Básico</div>
    <div class="level locked" data-id="2a" onclick="loadLevel('2a')">If simple</div>
  <div class="sublevel-title">Intermedio</div>
    <div class="level locked" data-id="2b" onclick="loadLevel('2b')">If + Else</div>
  <div class="sublevel-title">Avanzado</div>
    <div class="level locked" data-id="2c" onclick="loadLevel('2c')">If anidados</div>

  <!-- MISIÓN 3 -->
  <div class="mission-title">MISIÓN 3: Bucles</div>
  <div class="sublevel-title">Básico</div>
    <div class="level locked" data-id="3a" onclick="loadLevel('3a')">For simple</div>
  <div class="sublevel-title">Intermedio</div>
    <div class="level locked" data-id="3b" onclick="loadLevel('3b')">While</div>
  <div class="sublevel-title">Avanzado</div>
    <div class="level locked" data-id="3c" onclick="loadLevel('3c')">For con rango</div>

</div>

<div id="content">
  <h1 id="title"></h1>
  <p id="desc"></p>

  <!-- Barra XP -->
  <h3>XP</h3>
  <div id="xpContainer"><div id="xpBar"></div></div>

  <h3>Ejemplo:</h3>
  <pre id="example" class="example">—</pre>

  <div id="exerciseArea" style="display:none">
    <textarea id="code" placeholder="# Escribe tu código aquí..."></textarea><br>
    <button id="runBtn" onclick="runLevel()">Ejecutar</button>
  </div>

  <div id="msg"></div>
</div>

<div id="pyshotOverlay"><h1>PYSHOT</h1></div>

<script>
// ---------------- NIVELES — con nuevos niveles y ejemplos ----------------
const levels = {
  intro:{
    title:"Introducción a Python",
    desc:"Python es un lenguaje fácil, limpio y poderoso. Se usa en IA, data, web y automatización.",
    example:`print("Bienvenido a Call-Of-Python")`
  },

  // ----- MISIÓN 1 -----
  "1a":{title:"Variables",desc:"Declara x=10.",example:`x=10`,check:/x\s*=\s*10/},
  "1b":{title:"Strings",desc:"Crea nombre=\"Rodi\".",example:`nombre="Rodi"`,check:/nombre\s*=\s*["']/},
  "1c":{title:"Números",desc:"Crea edad=17.",example:`edad=17`,check:/edad\s*=\s*17/},
  "1d":{title:"Concatenación",desc:"Imprime Hola + nombre.",example:`print("Hola "+nombre)`,check:/\+\s*nombre/},
  "1e":{title:"Casting",desc:"Convierte un número a string.",example:`str(25)`,check:/str\s*\(/},

  // ----- MISIÓN 2 -----
  "2a":{title:"If simple",desc:"If numero>10.",example:`if numero>10:\n    print("Mayor")`,check:/if.*>/},
  "2b":{title:"If + else",desc:"If con else.",example:`if x>0:\n    print("OK")\nelse:\n    print("NO")`,check:/else/},
  "2c":{title:"If anidado",desc:"If dentro de otro.",example:`if edad>=18:\n    if edad<30:\n        print("Joven")`,check:/if[\s\S]*if/},

  // ----- MISIÓN 3 -----
  "3a":{title:"For simple",desc:"For para imprimir 0 a 4.",example:`for i in range(5):\n    print(i)`,check:/for.*range/},
  "3b":{title:"While",desc:"Usa while x<5.",example:`x=0\nwhile x<5:\n    x+=1`,check:/while/},
  "3c":{title:"For con rango",desc:"Rango personalizado.",example:`for i in range(2,10):\n    print(i)`,check:/range\s*\(/}
};

// Estado del juego
let currentLevel=null;
let unlocked=["intro","1a"];
let xp=0;

// Accesos a elementos
const xpBar=document.getElementById("xpBar");
const msg=document.getElementById("msg");
const pyshot=document.getElementById("pyshotOverlay");

// ----------------- Cargar nivel -----------------
function loadLevel(id){
  currentLevel=id;
  const l=levels[id];
  document.getElementById("title").textContent=l.title;
  document.getElementById("desc").textContent=l.desc;
  document.getElementById("example").textContent=l.example;
  msg.textContent="";

  if(l.check){
    document.getElementById("exerciseArea").style.display="block";
    document.getElementById("code").value="";
  } else {
    document.getElementById("exerciseArea").style.display="none";
  }
}

// ----------------- XP -----------------
function addXP(amount){
  xp+=amount;
  if(xp>100) xp=100;
  xpBar.style.width=xp+"%";
}

// ----------------- PYSHOT -----------------
function showPyshot(){
  pyshot.style.display="flex";
  setTimeout(()=>pyshot.style.display="none",1200);
}

// ----------------- Ejecutar -----------------
function runLevel(){
  const lvl=levels[currentLevel];
  const code=document.getElementById("code").value;
  if(!lvl.check) return;
  msg.style.background="transparent";

  if(lvl.check.test(code)){
    msg.style.background="#003b12";
    msg.textContent="¡PySHOT! Nivel completado.";
    showPyshot();
    addXP(20);
    unlockNext();
  } else {
    msg.style.background="#3b0000";
    msg.textContent="Código incorrecto. Observa el ejemplo.";
  }
}

// ----------------- Desbloqueo -----------------
function unlockNext(){
  const order=Object.keys(levels);
  const idx=order.indexOf(currentLevel);
  if(idx>=0 && idx<order.length-1){
    const next=order[idx+1];
    unlocked.push(next);
    const el=document.querySelector(`[data-id='${next}']`);
    if(el) el.classList.remove("locked");
  }
}

// ---------------- Inicialización ----------------
document.querySelectorAll(".level").forEach(el=>{
  if(!unlocked.includes(el.dataset.id)) el.classList.add("locked");
});
loadLevel("intro");
</script>

</body>
</html>
