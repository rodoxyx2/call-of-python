<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Call-Of-Python</title>
<style>
    body{
        font-family: Arial, sans-serif;
        display:flex;
        margin:0;
        background:#120007;
        color:white;
    }
    #sidebar{
        width:220px;
        background:#2b0010;
        padding:20px;
        height:100vh;
        overflow-y:auto;
        border-right:3px solid #ff002b;
    }
    #sidebar h2{
        color:#ff003c;
    }
    .locked{
        opacity:0.4;
        pointer-events:none;
    }
    .mission-title{
        margin-top:20px;
        color:#ff8aa3;
        font-size:18px;
        font-weight:bold;
    }
    .level{
        margin:8px 0;
        padding:8px;
        background:#3d0016;
        border-left:4px solid #ff003c;
        cursor:pointer;
    }
    #content{
        flex:1;
        padding:20px;
    }
    textarea{
        width:95%;
        height:150px;
        background:black;
        color:#00ffea;
        border:2px solid #ff003c;
        padding:10px;
    }
    #runBtn{
        padding:10px 20px;
        background:#ff003c;
        border:none;
        color:white;
        margin-top:10px;
        cursor:pointer;
        font-weight:bold;
    }
    #msg{
        margin-top:15px;
        padding:10px;
        border-radius:5px;
    }
</style>
</head>
<body>

<div id="sidebar">
    <h2>CALL-OF-PYTHON</h2>

    <div class="mission-title">Introducción</div>
    <div class="level" onclick="loadLevel('intro')" id="introBtn">¿Qué es Python?</div>

    <div class="mission-title">Misión 1: Fundamentos</div>
    <div class="level" onclick="loadLevel(1)">Nivel 1</div>
    <div class="level locked" id="lvl2" onclick="loadLevel(2)">Nivel 2</div>
    <div class="level locked" id="lvl3" onclick="loadLevel(3)">Nivel 3</div>

    <div class="mission-title">Misión 2: Condiciones</div>
    <div class="level locked" id="lvl4" onclick="loadLevel(4)">Nivel 4</div>
    <div class="level locked" id="lvl5" onclick="loadLevel(5)">Nivel 5</div>

</div>

<div id="content">
    <h1 id="title"></h1>
    <p id="desc"></p>

    <h3>Ejemplo:</h3>
    <pre id="example" style="background:#0f0f0f; padding:10px; color:#9efff3;">—</pre>

    <textarea id="code"></textarea>
    <br>
    <button id="runBtn" onclick="runLevel()">Ejecutar</button>
    <div id="msg"></div>
</div>

<script>
// desbloqueo inicial
let currentLevel = null;
let unlocked = 1;

// base de datos de niveles
const levels = {
    intro:{
        title:"Introducción a Python",
        desc:"Python es un lenguaje de programación fácil de leer, ideal para principiantes y usado en ciencia de datos, servidores, IA y más.",
        example:`print("Bienvenido soldado, a Call-Of-Python")`,
        validate:(code)=>true
    },

    1:{
        title:"Nivel 1 — Variables",
        desc:"Crea una variable llamada 'x' con el valor 10.",
        example:`x = 10\nprint(x)`,
        check:/x\s*=\s*10/,
    },

    2:{
        title:"Nivel 2 — Strings",
        desc:"Crea una variable nombre con tu nombre entre comillas.",
        example:`nombre = "Rodelina"\nprint(nombre)`,
        check:/nombre\s*=\s*".+"/
    },

    3:{
        title:"Nivel 3 — Concatenación",
        desc:"Usa print para imprimir: Hola + el nombre guardado.",
        example:`nombre = "Ana"\nprint("Hola " + nombre)`,
        check:/print\(\s*"Hola"\s*\+\s*nombre\s*\)/
    },

    4:{
        title:"Nivel 4 — Condicional básico",
        desc:"Haz un if que imprima 'Mayor' si número es mayor que 10.",
        example:`numero = 15\nif numero > 10:\n    print("Mayor")`,
        check:/if\s+.*>\s*10:/
    },

    5:{
        title:"Nivel 5 — Condicional else",
        desc:"Haz que si número NO es mayor que 10 imprima 'No es mayor'.",
        example:`numero = 5\nif numero > 10:\n    print("Mayor")\nelse:\n    print("No es mayor")`,
        check:/else:/
    }
};

// carga de niveles
function loadLevel(n){
    currentLevel = n;
    const lvl = levels[n];
    document.getElementById("title").textContent = lvl.title;
    document.getElementById("desc").textContent = lvl.desc;
    document.getElementById("example").textContent = lvl.example;
    document.getElementById("msg").textContent = "";
    document.getElementById("code").value = "";
}

// éxito
function success(){
    document.getElementById("msg").style.background="#003b12";
    document.getElementById("msg").textContent="¡Py-SHOT! Nivel completado.";
    unlocked++;
    let next = document.getElementById("lvl"+unlocked);
    if(next) next.classList.remove("locked");
}

// error
function fail(){
    document.getElementById("msg").style.background="#3b0000";
    document.getElementById("msg").textContent="Error soldado. Revisa el ejemplo.";
}

// ejecutar
function runLevel(){
    if(!currentLevel) return;

    let lvl = levels[currentLevel];
    let code = document.getElementById("code").value;

    if(lvl.validate){
        success();
        return;
    }
    if(lvl.check.test(code)){
        success();
    }else{
        fail();
    }
}

// ⭐ CARGAR INTRO AUTOMÁTICAMENTE ⭐
window.onload = ()=>{
    loadLevel("intro");
};
</script>

</body>
</html>
