<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<title>Call-Of-Python</title>

<style>
  body{
    font-family:Arial; margin:0; display:flex;
    background:#120007; color:#fff; height:100vh;
  }

  /* Sidebar */
  #sidebar{
    width:300px; background:#2b0010;
    padding:18px; height:100vh; overflow:auto;
    border-right:3px solid #ff002b;
  }
  #sidebar h2{ color:#ff003c; margin:0 0 10px; font-size:20px }
  .mission-title{ margin-top:14px; color:#ff8aa3; font-weight:700; font-size:15px }
  .sublevel-title{ margin-left:8px; margin-top:8px; color:#fcb3c4; font-size:13px }
  .level{
    margin:6px 0 6px 18px; padding:8px;
    background:#3d0016; border-left:4px solid #ff003c;
    cursor:pointer; border-radius:6px; font-size:13px;
  }
  .locked{ opacity:.35; pointer-events:none }
  .active{ box-shadow:0 6px 18px rgba(255,0,0,0.12); background:#500 }

  /* Content */
  #content{ flex:1; padding:22px; overflow:auto }
  textarea{
    width:96%; height:160px; background:#070607;
    color:#ffd7d7; padding:12px;
    border:2px solid #ff003c; border-radius:6px;
    font-family:monospace;
  }
  button{
    margin-top:12px; padding:10px 16px;
    background:#ff003c; border:none;
    color:#fff; border-radius:6px;
    cursor:pointer; font-weight:700;
  }
  #msg{ margin-top:14px; padding:12px; border-radius:6px; font-weight:700 }
  pre.example{
    background:#0f0f0f; padding:10px; color:#9efff3;
    border-radius:6px; white-space:pre-wrap;
  }

  /* PYSHOT Overlay */
  #pyshotOverlay{
    position:fixed; left:0; top:0; width:100%; height:100%;
    display:none; background:rgba(0,0,0,.85);
    z-index:50; align-items:center; justify-content:center;
  }
  #pyshotOverlay h1{
    font-size:72px; color:#ff3030;
    text-shadow:0 0 30px #ff3030;
    transform:scale(0); animation:pop .45s forwards;
  }
  @keyframes pop{ to{ transform:scale(1) } }

  /* Responsivo */
  @media(max-width:900px){
    #sidebar{ width:180px }
    textarea{ height:140px }
  }
</style>
</head>

<body>

<!-- SIDEBAR -->
<div id="sidebar">
  <h2>CALL-OF-PYTHON</h2>

  <div class="mission-title">INTRODUCCIÓN</div>
  <div class="level" data-id="intro" onclick="selectLevel('intro')">¿Qué es Python?</div>

  <div class="mission-title">MISIÓN 1: Fundamentos</div>
  <div class="sublevel-title">Básico</div>
    <div class="level" data-id="1-1" onclick="selectLevel('1-1')">Variables</div>
    <div class="level locked" data-id="1-2" onclick="selectLevel('1-2')">Tipos de datos</div>
    <div class="level locked" data-id="1-3" onclick="selectLevel('1-3')">Entrada (input)</div>

  <div class="sublevel-title">Intermedio</div>
    <div class="level locked" data-id="1-4" onclick="selectLevel('1-4')">Operadores</div>
    <div class="level locked" data-id="1-5" onclick="selectLevel('1-5')">Comentarios</div>

  <div class="mission-title">MISIÓN 2: Control</div>
  <div class="sublevel-title">Básico</div>
    <div class="level locked" data-id="2-1" onclick="selectLevel('2-1')">Condicionales (if)</div>

  <div class="sublevel-title">Intermedio</div>
    <div class="level locked" data-id="2-2" onclick="selectLevel('2-2')">Bucles (for)</div>

  <div class="sublevel-title">Avanzado</div>
    <div class="level locked" data-id="2-3" onclick="selectLevel('2-3')">Break / Continue</div>

  <div class="mission-title">MISIÓN 3: Estructuras</div>
  <div class="sublevel-title">Básico</div>
    <div class="level locked" data-id="3-1" onclick="selectLevel('3-1')">Listas</div>

  <div class="sublevel-title">Intermedio</div>
    <div class="level locked" data-id="3-2" onclick="selectLevel('3-2')">Tuplas</div>
    <div class="level locked" data-id="3-3" onclick="selectLevel('3-3')">Diccionarios</div>

  <div class="sublevel-title">Avanzado</div>
    <div class="level locked" data-id="3-4" onclick="selectLevel('3-4')">Sets</div>

  <div class="mission-title">MISIÓN 4: Funciones</div>
  <div class="sublevel-title">Básico</div>
    <div class="level locked" data-id="4-1" onclick="selectLevel('4-1')">Definir función</div>

  <div class="sublevel-title">Intermedio</div>
    <div class="level locked" data-id="4-2" onclick="selectLevel('4-2')">Parámetros</div>
    <div class="level locked" data-id="4-3" onclick="selectLevel('4-3')">Return</div>
</div>

<!-- CONTENT -->
<div id="content">
  <h1 id="title"></h1>
  <p id="desc"></p>

  <h3>Explicación:</h3>
  <div id="explain" style="background:#111;padding:12px;border-radius:8px;color:#ffdede"></div>

  <h3>Ejemplo:</h3>
  <pre id="example" class="example">—</pre>

  <div id="exerciseArea" style="display:none">
    <textarea id="code" placeholder="# Escribe aquí tu código..."></textarea><br>
    <button onclick="runLevel()">Ejecutar / Verificar</button>
  </div>

  <div id="msg"></div>
</div>

<!-- PYSHOT -->
<div id="pyshotOverlay"><h1>PYSHOT</h1></div>

<script>
/* --- NIVELES --- */
const levels = {
  intro:{
    title:"Introducción a Python",
    desc:"¿Qué es Python y para qué sirve?",
    explain:"Python es un lenguaje sencillo y muy usado...",
    example:`print("Hola, bienvenido a Call-Of-Python")`
  },

  "1-1":{
    title:"Variables",
    desc:"Qué es una variable",
    explain:"Una variable es un nombre que guarda un valor.",
    example:`edad = 20\nnombre = "Ana"`,
    check: c => /[a-zA-Z_]\w*\s*=\s*(\d+|["'].*["'])/.test(c)
  },

  "1-2":{
    title:"Tipos de datos",
    desc:"int, float, str y bool",
    explain:"Tipos comunes en Python.",
    example:`entero = 5\nflotante = 3.14\ntexto = "hola"\nactivo = True`,
    check: c => /["'].*["']|\d+\.\d+|\bTrue\b|\bFalse\b|\b\d+\b/.test(c)
  },

  "1-3":{
    title:"Entrada (input)",
    desc:"Leer datos del usuario",
    explain:"input() lee texto del usuario",
    example:`nombre = input("Tu nombre: ")\nprint("Hola " + nombre)`,
    check: c => /\binput\s*\(/.test(c)
  },

  "1-4":{
    title:"Operadores",
    desc:"+, -, *, /",
    explain:"Operadores aritméticos básicos",
    example:`a = 4\nb = 2\ntotal = a + b`,
    check: c => /[+\-*/%]/.test(c)
  },

  "1-5":{
    title:"Comentarios",
    desc:"Documentar código",
    explain:"Comienzan con #",
    example:`# Esto es un comentario`,
    check: c => /#/.test(c)
  },

  "2-1":{
    title:"Condicionales",
    desc:"if",
    explain:"If ejecuta código según condición",
    example:`if 5 > 2:\n    print("Sí")`,
    check: c => /\bif\b.*:/.test(c)
  },

  "2-2":{
    title:"Bucles for",
    desc:"Repetición con for",
    explain:"For recorre secuencias",
    example:`for i in range(3):\n    print(i)`,
    check: c => /\bfor\b.*\bin\b/.test(c)
  },

  "2-3":{
    title:"Break / Continue",
    desc:"Control de bucles",
    explain:"break sale, continue salta",
    example:`for i in range(5):\n    if i==2:\n        break`,
    check: c => /\b(break|continue)\b/.test(c)
  },

  "3-1":{
    title:"Listas",
    desc:"Colecciones ordenadas",
    explain:"Listas con []",
    example:`frutas=["manzana","pera"]`,
    check: c => /\[.*\]/.test(c)
  },

  "3-2":{
    title:"Tuplas",
    desc:"Inmutables",
    explain:"Tuplas con ()",
    example:`t=(1,2,3)`,
    check: c => /\(.*,.+\)/.test(c)
  },

  "3-3":{
    title:"Diccionarios",
    desc:"Clave → valor",
    explain:"Diccionarios con {}",
    example:`d={"a":1,"b":2}`,
    check: c => /\{.*:.*\}/.test(c)
  },

  "3-4":{
    title:"Sets",
    desc:"Sin orden",
    explain:"Sets sin duplicados",
    example:`s={1,2,3}`,
    check: c => /\bset\s*\(|\{[^\:]+\}/.test(c)
  },

  "4-1":{
    title:"Funciones",
    desc:"Definir función",
    explain:"def mi_func():",
    example:`def saludar():\n    print("Hola")`,
    check: c => /\bdef\b\s+[a-zA-Z_]\w*\s*\(.*\)\s*:/.test(c)
  },

  "4-2":{
    title:"Parámetros",
    desc:"Argumentos",
    explain:"def f(x):",
    example:`def doble(n): return n*2`,
    check: c => /\bdef\b.*\(.*\w.*\)/.test(c)
  },

  "4-3":{
    title:"Return",
    desc:"Devolver valor",
    explain:"return",
    example:`def suma(a,b): return a+b`,
    check: c => /\breturn\b/.test(c)
  }
};

/* --- ESTADO --- */
let current = null;
let unlocked = ["intro","1-1"];

const titleEl = document.getElementById("title");
const descEl = document.getElementById("desc");
const explainEl = document.getElementById("explain");
const exampleEl = document.getElementById("example");
const exerciseArea = document.getElementById("exerciseArea");
const msgEl = document.getElementById("msg");
const pyshot = document.getElementById("pyshotOverlay");

/* --- CAMBIAR NIVEL --- */
function selectLevel(id){
  if (!unlocked.includes(id)){
    msgEl.style.background="#3b0000";
    msgEl.textContent="Nivel bloqueado.";
    return;
  }

  document.querySelectorAll("#sidebar .level")
    .forEach(el=>el.classList.remove("active"));

  const btn = document.querySelector(`#sidebar .level[data-id='${id}']`);
  if (btn) btn.classList.add("active");

  current = id;
  const lvl = levels[id];

  titleEl.textContent = lvl.title;
  descEl.textContent = lvl.desc;
  explainEl.textContent = lvl.explain;
  exampleEl.textContent = lvl.example;

  msgEl.textContent = "";

  if (lvl.check){
    exerciseArea.style.display = "block";
    document.getElementById("code").value = "";
  } else {
    exerciseArea.style.display="none";
  }
}

/* --- EJECUTAR NIVEL --- */
function runLevel(){
  if (!current) return;

  const lvl = levels[current];
  if (!lvl.check) return;

  const code = document.getElementById("code").value;
  const ok = typeof lvl.check==="function" ? lvl.check(code) : lvl.check.test(code);

  if (ok){
    msgEl.style.background="#003b12";
    msgEl.textContent="¡Py-SHOT! Nivel completado.";
    showPyshot();
    unlockNext();
  } else {
    msgEl.style.background="#3b0000";
    msgEl.textContent="Código inválido.";
  }
}

/* PYSHOT */
function showPyshot(){
  pyshot.style.display="flex";
  setTimeout(()=>pyshot.style.display="none",1200);
}

/* DESBLOQUEAR SIGUIENTE */
function unlockNext(){
  const order = [
    "intro",
    "1-1","1-2","1-3","1-4","1-5",
    "2-1","2-2","2-3",
    "3-1","3-2","3-3","3-4",
    "4-1","4-2","4-3"
  ];

  const idx = order.indexOf(current);
  const next = order[idx+1];

  if (next && !unlocked.includes(next)){
    unlocked.push(next);
    const el = document.querySelector(`#sidebar .level[data-id='${next}']`);
    if (el) el.classList.remove("locked");
  }
}

/* INICIO */
(function init(){
  document.querySelectorAll("#sidebar .level").forEach(el=>{
    const id = el.getAttribute("data-id");
    if (!unlocked.includes(id)) el.classList.add("locked");
  });

  selectLevel("intro");
})();
</script>

</body>
</html>
